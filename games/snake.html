<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HamSnake</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap');

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Orbitron', sans-serif;
      background: linear-gradient(135deg, #0f0f2f, #1a1a3d);
      color: #00ffff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      height: 100vh;
      overflow: hidden;
    }

    h1 {
      margin: 1rem 0 0.5rem;
      text-shadow: 0 0 5px #00ffff, 0 0 10px #ff00ff;
    }

    #score, #high-score {
      margin: 0.2em;
    }

    /* Reduced game grid size for smaller screen */
    #game {
      display: grid;
      grid-template-columns: repeat(15, 20px); /* 15 columns instead of 20 */
      grid-template-rows: repeat(15, 20px);    /* 15 rows instead of 20 */
      gap: 1px;
      background: #111;
      margin-top: 1rem;
    }

    .cell {
      width: 20px;
      height: 20px;
      background: #222;
    }

    .snake {
      background: limegreen;
    }

    .snake-head img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }

    .food {
      background: red;
    }

    .powerup {
      background: gold;
    }

    #controls {
      margin: 1em;
      display: flex;
      flex-wrap: wrap;
      gap: 1em;
      justify-content: center;
    }

    button {
      padding: 0.5em 1em;
      background: linear-gradient(to right, #00f0ff, #ff00ff);
      border: none;
      border-radius: 6px;
      color: white;
      font-weight: bold;
      cursor: pointer;
      text-shadow: 0 0 5px #000;
    }

    button:hover {
      opacity: 0.9;
    }

    #game-over {
      display: none;
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0, 0, 0, 0.85);
      color: #00ffff;
      font-size: 2em;
      text-shadow: 1px 1px 4px #000;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      z-index: 999;
    }

    /* Directional controls layout */
    #directional-controls {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr; /* Three columns for left, up, right */
      gap: 0.5em;
      margin-top: 1em;
    }

    #directional-controls button {
      width: 60px; /* Increased size for better touch usability */
      height: 60px; /* Increased size for better touch usability */
      font-size: 1.5em; /* Larger text size */
      background: linear-gradient(to right, #00f0ff, #ff00ff);
      border: none;
      border-radius: 8px;
      color: white;
      font-weight: bold;
      cursor: pointer;
      text-shadow: 0 0 5px #000;
    }

    #directional-controls button:hover {
      opacity: 0.9;
    }

    #directional-controls .spacer {
      visibility: hidden; /* Invisible spacer for layout alignment */
    }
  </style>
</head>
<body>
  <div id="game-over" class="flex" style="display: none;">
    <div>üíÄ Hammered by HamHacks!</div>
    <div id="final-score" style="font-size: 1.2em; margin-top: 0.5em;"></div>
    <button onclick="resetGame()">Try Again</button>
  </div>

  <h1>üêç HamSnake</h1>
  <div id="score">Score: 0</div>
  <div id="high-score">Best: 0</div>

  <!-- Game grid -->
  <div id="game"></div>

  <!-- Controls for game actions -->
  <div id="controls">
    <button onclick="toggleGame()">Start / Pause</button>
    <button onclick="toggleMute()" id="mute-btn">üîä Mute</button>
    <button onclick="window.location.href='https://www.hamhacks.co.uk'">üè† Home</button>
  </div>

  <!-- Directional controls for movement -->
  <div id="directional-controls">
    <button id="up-btn" onclick="setDirection(0, -1)">‚¨ÜÔ∏è</button> <!-- Up -->
    <button class="spacer"></button> <!-- Spacer -->
    <div>
      <button id="left-btn" onclick="setDirection(-1, 0)">‚¨ÖÔ∏è</button> <!-- Left -->
      <button id="right-btn" onclick="setDirection(1, 0)">‚û°Ô∏è</button> <!-- Right -->
    </div>
    <button id="down-btn" onclick="setDirection(0, 1)">‚¨áÔ∏è</button> <!-- Down -->
  </div>

  <audio id="eat-sound" src="https://freesound.org/data/previews/82/82921_1022651-lq.mp3"></audio>

  <script>
    const gridSize = 15; // Reduced grid size for smaller screen
    const game = document.getElementById('game');
    const scoreDisplay = document.getElementById('score');
    const highScoreDisplay = document.getElementById('high-score');
    const eatSound = document.getElementById('eat-sound');
    const muteBtn = document.getElementById('mute-btn');
    const gameOverScreen = document.getElementById('game-over');
    const finalScoreDisplay = document.getElementById('final-score');

    let snake = [{ x: 7, y: 7 }]; // Adjusted starting position for smaller grid
    let direction = { x: 1, y: 0 };
    let food = spawn();
    let powerup = null;
    let interval;
    let isPlaying = false;
    let score = 0;
    let best = 0;
    let speed = 200;
    let muted = false;

    function createGrid() {
      game.innerHTML = '';
      for (let i = 0; i < gridSize * gridSize; i++) {
        const div = document.createElement('div');
        div.className = 'cell';
        game.appendChild(div);
      }
    }

    function setDirection(x, y) {
      // Prevent reversing direction
      if ((x === 1 && direction.x === -1) || (x === -1 && direction.x === 1) ||
          (y === 1 && direction.y === -1) || (y === -1 && direction.y === 1)) {
        return;
      }
      direction = { x, y };
    }

    // Remaining game logic stays unchanged...
  </script>
</body>
</html>
